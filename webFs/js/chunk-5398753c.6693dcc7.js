(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5398753c"],{"1c2e":function(e,t,i){"use strict";var n=i("1944"),a=i("857c"),o=i("efe2"),s=i("99ad"),r="toString",c=RegExp.prototype,u=c[r],l=o((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),d=u.name!=r;(l||d)&&n(RegExp.prototype,r,(function(){var e=a(this),t=String(e.source),i=e.flags,n=String(void 0===i&&e instanceof RegExp&&!("flags"in c)?s.call(e):i);return"/"+t+"/"+n}),{unsafe:!0})},4235:function(e,t,i){"use strict";var n=i("a7af"),a=i.n(n);a.a},"4ae9":function(e,t,i){"use strict";i("e18c"),i("1c2e");var n,a=i("986e"),o=i("0a1b");(function(){var e;n=function(t){if(e)return e;e=this,this.reconnecting=!1,this.reconnectTimeout="",this.client="",this.failTimes=0,this.isConnect=!1;var i=function(){console.log("clearReconnect"),e.reconnecting&&(e.reconnectTimeout&&(clearTimeout(e.reconnectTimeout),e.reconnectTimeout=null),e.reconnecting=!1)},n=function(){console.log("onConnect"),e.reconnecting&&(e.reconnecting=!1),e.isConnect=!0,e.failTimes=0,e.client.subscribe("video/realVideo/streamStart"),e.client.subscribe("video/realVideo/streamEnd"),e.client.subscribe("video/device/online"),e.client.subscribe("video/device/offline"),e.client.subscribe("video/deviceIid/channleID/datalink/firewarning"),e.client.subscribe("gdu/#"),e.client.subscribe("radar/realTimeInfo")},s=function(t){console.log("onConnectionLost"),e.isConnect=!1,l(),0!==t.errorCode&&console.log("errorMessage:"+t.errorMessage)},r=function(e){var t=JSON.parse(e.payloadString);a["a"].$emit(e.topic,t),"gdu/"===e.topic.substr(0,4)&&a["a"].$emit("droneInfos",e)},c=function(){console.log("connect failed"),e.failTimes+=1,e.failTimes<=5?l():e.failTimes=0},u=function(){console.log("start reconnect"),e.client.reconnect()},l=function(){e.reconnecting=!0,e.reconnectTimeout=setTimeout((function(){u()}),1e4)};(function(){i();var t="pc_"+(new Date).getTime().toString();e.client=new Paho.Client(o["a"].mqttServer,o["a"].mqttPort,"/gduMqtt",t),e.client.startTrace(),e.client.onConnectionLost=s,e.client.onMessageArrived=r,console.log("start to connect"),e.client.connect({onSuccess:n,onFailure:c,timeout:30,keepAliveInterval:10,userName:"admin",password:"admin"})})();this.subscribe=function(e,t){this.isConnect&&(t=t||{},this.client.subscribe(e,t))}}})(),t["a"]=n},6511:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"home"},[i("el-container",[i("el-header",[i("div",{staticClass:"box"},e._l(e.systems,(function(t,n){return i("div",{key:n,staticClass:"list",on:{click:function(t){return t.stopPropagation(),e.jumpTo(n)}}},[i("div",{staticClass:"item",class:{title:3==n,active:e.isActive==n}},[i("span",[e._v(e._s(t.content))])]),[1==n?i("div",{staticClass:"status"},[i("el-button",{class:{activeStatus:1==e.curActive},attrs:{type:"primary"},on:{click:function(t){return t.stopPropagation(),e.jumpToVideoUrl(1)}}},[e._v("实时视频")]),i("el-button",{class:{activeStatus:2==e.curActive},attrs:{type:"primary"},on:{click:function(t){return t.stopPropagation(),e.jumpToVideoUrl(2)}}},[e._v("回放")])],1):e._e()]],2)})),0),i("div",{class:this.isChecked?"activeClass":"about",on:{click:function(t){return t.stopPropagation(),e.goToAboutUs()}}},[i("img",{attrs:{src:this.isChecked?e.aboutImgCkSrc:e.aboutImgSrc,alt:""}}),i("p",[e._v("关于我们")])]),i("div",{staticClass:"cur"},[i("div",{staticClass:"realTime"},[i("span",{staticClass:"extra"},[e._v(e._s(e.timeObj.year))]),e._v(" 年 "),i("span",{staticClass:"extra"},[e._v(e._s(e.timeObj.month))]),e._v(" 月 "),i("span",{staticClass:"extra"},[e._v(e._s(e.timeObj.day))]),e._v(" 日 "),i("span",{staticClass:"extra"},[e._v(e._s(e.timeObj.weekday))]),i("span",{staticClass:"curCity extra"},[e._v(e._s(e.curCity))]),e.weatherReport?[i("span",[e._v("天气：")]),i("span",{staticClass:"extra"},[e._v(e._s(e.weatherReport.weather))]),i("span",{staticClass:"extra"},[e._v(" "+e._s(e.weatherReport.temperature)+" "),i("i",[e._v("。")])])]:e._e()],2)])]),i("el-main",[i("keep-alive",[e.$route.meta.keepAlive?i("router-view"):e._e()],1),e.$route.meta.keepAlive?e._e():i("router-view")],1)],1)],1)},a=[],o=(i("fe59"),i("ecb4"),i("08ba"),i("c466")),s=i("77fa"),r=i("4ae9"),c=i("986e"),u=i("7ded"),l=i("0a1b"),d="gdu/appOutLine",f={name:"Home",data:function(){return{timeObj:"",curCity:"",weatherReport:"",isActive:1,systems:[{content:"可视化调度"},{content:"视频侦查"},{content:"评战系统"},{content:"消防救援现场指挥系统"},{content:"预警历史"},{content:"数字化装备"},{content:"系统设置"}],curActive:1,realtimeInfoTopicArray:[],isChecked:!1,aboutImgSrc:i("99a3"),aboutImgCkSrc:i("9b59")}},created:function(){var e=this;this.systems[3].content=l["a"].projectTitle,c["a"].$on("video/device/online",(function(t){c["a"].$emit("UpdateDeviceOnlineStatus",t),e.$notify.success({title:"提示",message:"设备上线！"})})),c["a"].$on("video/device/offline",(function(t){c["a"].$emit("UpdateDeviceOnlineStatus",t),e.$notify.success({title:"提示",message:"设备下线！"})})),c["a"].$on("video/realVideo/streamStart",(function(e){c["a"].$emit("streamStart",e)})),c["a"].$on("video/realVideo/streamEnd",(function(e){c["a"].$emit("streamEnd",e)})),c["a"].$on("video/deviceIid/channleID/datalink/firewarning",(function(t){e.$notify.warning({title:"警告",message:"发现火点火情！"}),c["a"].$emit("getFireAlarm",t)})),c["a"].$on("droneInfos",(function(t){e.parseDroneRealtimeInfo(t)})),c["a"].$on("video/people/found",(function(t){e.$notify.warning({title:"提示",message:"发现可疑人员!"})})),c["a"].$on("video/people/real",(function(e){c["a"].$emit("peopleRealChange",e)})),c["a"].$on("video/aRAiResult",(function(e){c["a"].$emit("getArChange",e)}))},mounted:function(){var e=this;this.jumpTo(this.isActive),setInterval((function(){e.timeObj=Object(o["b"])()}),1e3),this.init();new r["a"];this.getRealtimeInfoTopics()},watch:{$route:"getPath"},methods:{getPath:function(){"/playback"===this.$route.path?this.curActive=2:"/videoSystem"===this.$route.path&&(this.curActive=1)},jumpTo:function(e){3!==e&&(0===e?this.$router.push({path:"/decisionSystem"}):1===e?this.jumpToVideoUrl(this.curActive):2===e?this.$router.push({path:"/evaluationSystem"}):4===e?this.$router.push({path:"/digitalIndividual"}):5===e?this.$router.push({path:"/digitalEquipment"}):6===e&&this.$router.push({path:"/systemSettings"}),this.isActive=e)},jumpToVideoUrl:function(e){this.isActive=1,this.curActive=e,1===e?this.$router.push({path:"/videoSystem"}):this.$router.push({path:"/playback"})},init:function(){var e=this;s["a"].getLocation({}).then((function(t){if(t&&t&&t.data&&"OK"===t.data.info){e.curCity=t.data.city||"";var i=t.data.adcode;s["a"].getWeather({city:i}).then((function(t){t&&t.data&&"OK"===t.data.info&&(e.weatherReport=t.data.lives[0])}))}}))},getRealtimeInfoTopics:function(){this.realtimeInfoTopicArray=[];var e=this,t=this.$axios;this.$axios.get(u["a"].getUserDetail).then((function(i){0===i.data.code&&t.get(u["a"].getDeptByDeptCode,{params:{deptCode:i.data.data.deptCode}}).then((function(t){0===t.data.code&&t.data.data.forEach((function(t){e.realtimeInfoTopicArray.push("gdu/"+t)}))})).catch((function(e){console.log("loginApi.getDeptByDeptCode Err : "+e)}))})).catch((function(e){console.log("loginApi.getUserDetail Err : "+e)}))},parseDroneRealtimeInfo:function(e){var t=JSON.parse(e.payloadString);if(d===e.topic)c["a"].$emit("droneOffline",t);else for(var i=this.realtimeInfoTopicArray,n=0;n<i.length;n++)if(0===e.topic.indexOf(i[n])){c["a"].$emit("droneRealtimeInfo",t);break}},goToAboutUs:function(){this.isChecked=!this.isChecked,this.$router.push({path:"/aboutUs"})}}},p=f,g=(i("4235"),i("9ca4")),h=Object(g["a"])(p,n,a,!1,null,"e956f39c",null);t["default"]=h.exports},"7ded":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={login:"/fms-auth-center/login",logout:"/fms-auth-center/logout",getUserDetail:"/cloud-fms/sysuser/getUserDetail",getDeptByDeptCode:"/cloud-fms/dept/getDeptTreeByDeptCode",updateHeadImg:"/cloud-fms/sysuser/updateHeadImg",updateUser:"/cloud-fms/sysuser/updateUser"}},"986e":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("a593"),a=new n["default"]},"99a3":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAFLUlEQVRYR9WZe1BUVRzHv7/Lrjx2eamZOpbZ00cvB7XBclJ2wyZIzYpoJGfCQssy2EVmCoo1e0zyWNSBEKWpIa3RQbNMjWHRHpLmMJTi+Ah7ODo4NoCr4KC79/6auwsLC4tw75VmOn/uPb/v73PO2fM7v/M7BDXNZhPiWw3TJZ1+DkkcA8JEiTCOGOEgFhm4JDCdB+MEC1QnuF37qqLbD8Nmk5S6IyUGccvzx1Nw0KtEeAHAGCW2AJqYUcFXxZKa4sy/B2s7KMD4ZXmjpFD9KiZeQgT9YMUD9WOGi4jKhXZXblXpygsDaQ0IaErPX0RBQesADB9ITOH3FhbFFY6izM3Xs+sXMCZtgz7a2F4MopcVOlbWnWlja1vo8rqypa5AhgEBY9JsYdHGyO0gzFXmTWVvxnetbc6FdWW2K70V+gB6Z+7KN/8ZXBeRBzLsyd4z2QfQbCksG/Jl7W+imTZWF6an9fzsB9i5IT5XuVAeswUzH0CyaTqMYSH4ueE01lY60NZxbdCSLIopPTeOD9ATSgy641p2a+ykCViVOh/UY9j760/i/c17Bg0IoEUg96SqfG8I8kmZLPZSIixVotS7rzXpMTw+Y4rfz1ddLiS+WaxIlhkbHIUZy3yA5hVFt7KOG7UG4aWJs/DM7Bg/mGbnZSSvLlcGCLjIRXdWr0s/45lBk8X+ERGyFKkE6HxzlBHr33ge0eEGz1dmhn1bNfb8cky5tMR51XZLFsFmE8yXI8+qOFsDOh0RYUDCQ/fCEBqMg8f+QP1pWVpVa6oOd46jeEvBTImEA6okhthIYOlhMlvs2SC8N8S+1MkzcmTAHSAsUKcAjB0egTlTJ2LqXbdgZJQRl9o78NOR31H5468QJcXpnz8G01dkshYdI/BkNYArFsYhIfY+CD0DX6fQrtojWLu9Ro2sz4YlHCeT1d5KQJQapRTzDPzV1IwIQwheSpyF8LAQn4xbFPHU2x+j45pbjbQ3CgAXyWy1y2mOTrVKp2FOyhN49MG7/WQWrd6EC8429dIMUQbsABCsXsVr+e6L8xA75fbu5WHGvLeK0eFSP4OQAU1W+z8EjNQKuCU7FTdFR/hkmpovYvGHn2qS9Syxlk3S5X10dAQqslP9YPYcOorCbQ5tgPIm0RpmZAL55Eh/1uwH80HFbuz77ZQmQEjYSeaMohwIvFqLUu8NIjEjKXcDnFfkv7eGJgdqrUedHAK35qYhyhjmI2k8dwGv2LdoIPOaeo46rcnCHWNGotSa4gez44d6lHz9vVZAb7Igq5gzCtdAoJVqFOdOm4TMZP/LX94Xe1FVd0KNXLeNRHnV9vQsL6CcsOq5kaC8apA8ZxqWJDziB5NbvhO1x/9UDci9E1ZZSW3KPz/2frz2dJwfTG3DaXy2txbBw/QwhgzD4VNnFMH2Sfll6/jMvFESK780RRlDsWnlYkQaQvtAyBn1ukoHdh1sUAIY+NLkmUWrfREBiq+dE0aPQFriLEy+bSyC9Tqcb3HiwNFG7D7UgHPNTiVwcoKQ4ijI8NVrAlzci8pAPLT1mH6QmbHJUZjh5/v/V/qQB+cpHhkit0JAgqL1UdtZwret7c6kQRWPunzMttl0OmfUegjsuUAPWZOo1B158fX9NlvAvGzgAqal4DkioURLSaSfwbWwxMsddsuX1xv8gIDdIUi/ivnGlIABfBIkuN/pqr9oBuwSiLPmjyfWWEQnsaSm4AYX0fuMsPMZQgzSxRFzDBHd43uGkC87hMsC4ywzn2SiuiDRXaP2GeJfNf7+vzXY95cAAAAASUVORK5CYII="},"9b59":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAFBklEQVRYR9VZW2wUZRT+zuxMd+n2QrelNwrWCKmU6NJSElKeKg9NUBNiDD6AiYmCBqI+2QhtZBtriUJiVCRQvDyoidFEIQSliZHEhKcudItAgZIAtZdd2u72Rtvd2Z1jZuqunXahcxGC/+uc7zvffznnP/8ZgoXhYxaE86ENgog6gWg9mJ8EqAyMbBAnmDFOhCCIrirM55U4zirrizp8RIpZd2QG0HJh4DFBdOyGgpcBlJjBAhiEgG+UeOJIU3XpbaNYQwJ954KFzixuZhZeBSAZJb+HnUyEL6OTvN+3qfjOYlyLCmzpHNhOJHxKIM9iZGa+MzjMrLzVVFX63f1w9xS4y89SuRT6HEw7zTg2bUt8/JZctKethuR02LQCff6BzAyRfgKEetMOLQGU9licX/DVlE7Nhy8QuMvvl8rF5acenrikJKX9Vrz/+baaGt1KLhDY2hVse+Dbeq9VJj6+z1u8a+5nnUA1IARyfGtpl/4BVRe4UFvohsshoGdsBmf6JhFV2DClwokdcwMnJVBNJZIb3Xai9YkcCdsez9OJuRKZxsneCcMC1eiWCWt83tkUlBLYGggeBeh1w0xpDLesyIbXs0T3RVYYh/4cMknLx/atK34jJXC/f2ClU3TcsJuE60rd2LjMrRMzEUvgcPeISYGQo/HEquaa0l5tBVsDoQ8BNJhlmW+fLQl4ZbUHWZKgfWIGfukbw8Vw1DQ1kXJwr7ekgdSLP6PrTp+FuzWt0yxRwLp8F5wOQs94DL2TafOvEcGDMW9hGbV09tcKJJ4zgnjYNgrHN9EHXcFGYmp52M6N+GPiJmoNBH8GaKsRQDqbpRkOVOY5Ue7O0M7eTELBtbEoOoamYbr4W+CAT6gCLwNUaUVgfVkWqjxLQLTwSr8wMoX2vkkrtCkMM3dTa+BOBOClVphqizIxPBOHy0HYXJINlzgbvepQy+qPLw1DzYPWB42qAmWAResks8itK3OwJs+lozl8ZRgTso2NZiSotSs0A4bTrsAXy3OwOvdfgeq6Hbo4hLiaDK0OVeCBQGiIgQKrHEnc7jX5yM1wpGjC0TiOXQ3bpNW22HqQJL3nSg7srszXiQmEp/HrX8aLhHQzYdKCxF6aUYm9Hhe2rMjR+ThxexTdozFbK0jMJ6klMNAkwPG+Hab5AcLM+OTyMKYTNs6feperibqlM1QrEGxddW+vLUDmnBQTnJLxdU/Ezpw1rHbV2S0WlrlEvFahf5F2DN/Fb/137QqcLRZUlgNdgx8xC+9YYXwqz4nnVubqoKd6x3ApYr7EmktChIN7vUUNmkA7BevGwiWoK8nWCfzxZgQ3xi2XWSqXLEjSqnfXemYLVnVYLfmr812oL9NH8PXRGfwRmoIkEJwO4OaEWbHzSn5VoK8rWCix+UeTGhw7Kzy6IElOWo3mM/0TCIzMGD49DIRl4oWPJu0sdoa2M8H0s7PAJWJziRvL3ZK2apFoAtfHo5qw0VjCsDjVkBg79lYVpfo1j9TDnZm/aKwq1vWC/n+tD+08+gcynaLwA4OeNbU/Fo0JfDoaV7YZah4lffjOsuj0BD9jFrQH9IMaRMrRaLj4TV8dxdP5WLyBGQi+RMAROy2RdI7VFgcU7GmsLv7+fpNfVGAyBTlBzcz4T1rAAH8VI7yX7L/YFpgkeGSb6PNnqP2GuBjaIAHPKMzrCVSR+g2hJTNMANzH4GsC0XkZ+F152tpviL8B584EcEqFmnsAAAAASUVORK5CYII="},a7af:function(e,t,i){},c466:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return a})),i.d(t,"c",(function(){return s}));i("e18c"),i("1c2e");function n(){var e=new Date,t=e.getFullYear(),i=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,n=e.getDate()<10?"0"+e.getDate():e.getDate(),a=e.getDay();switch(a){case 0:a="日";break;case 1:a="一";break;case 2:a="二";break;case 3:a="三";break;case 4:a="四";break;case 5:a="五";break;case 6:a="六";break}return{year:t,month:i,day:n,weekday:"星期"+a}}function a(e){var t=parseInt(e),i=0,n=0;t>=60&&(i=parseInt(t/60),t=parseInt(t%60),i>=60&&(n=parseInt(i/60),i=parseInt(i%60)));var a=o(n)+":"+o(i)+":"+o(t);return a}function o(e){return e<10?"0"+e.toString():e.toString()}function s(e){var t=function(e){return e<10?"0"+e:e},i=new Date(e),n=i.getFullYear(),a=i.getMonth()+1,o=i.getDate(),s=i.getHours(),r=i.getMinutes(),c=i.getSeconds();return n+"-"+t(a)+"-"+t(o)+" "+t(s)+":"+t(r)+":"+t(c)}}}]);