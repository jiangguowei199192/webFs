(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2c6423b2"],{"04e6":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tree webFsScroll"},[a("el-tree",{ref:"tree",attrs:{data:e.treeData,"highlight-current":"","node-key":"id","default-expand-all":"",props:e.defaultProps,"filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,n=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",{class:{disabled:"offline"===n.onlineStatus&&!n.children},attrs:{title:isNaN(n.deviceCountTotal)?""+i.label:i.label+"["+n.deviceCountOnline+"/"+n.deviceCountTotal+"]"}},[n.class?a("span",{class:n.class}):e._e(),a("i",{class:{extra:!n.children},attrs:{id:"liveVideo"+n.id}},[e._v(" "+e._s(i.label)+" "),isNaN(n.deviceCountTotal)?e._e():a("a",[e._v("["+e._s(n.deviceCountOnline)+"/"+e._s(n.deviceCountTotal)+"]")])]),a("b",{attrs:{obj:JSON.stringify(Object.assign({},n,{deviceCode:i.parent.data.id,deviceAddress:i.parent.data.deviceAddress,deviceBrand:i.parent.data.deviceBrand,parentLabel:i.parent.data.label,labelTotal:i.parent.data.label+"-"+n.label}))}})])])}}])})],1)},n=[],s=(a("c975"),{props:{treeData:{type:Array,default:function(){return[]}},isLive:{type:Boolean,default:!0},isLiveTree:{type:Boolean,default:!0}},data:function(){return{defaultProps:{children:"children",label:"label"}}},methods:{filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},handleNodeClick:function(e,t){var a=t.parent.data;if(!0===e._bIsDevice?this.$emit("clickAnDeviceItem",e):!0===a._bIsDevice&&this.$emit("clickAnDeviceItem",a),!e.children){var i=document.getElementById("liveVideo"+e.id).parentElement;if("offline"===e.onlineStatus&&this.isLive)return void this.$nextTick((function(){i.parentElement.parentElement.parentElement.classList.remove("is-current")}));if(this.isLive){var n={isShowOperate:!1,deviceCode:t.parent.data.id,deviceAddress:t.parent.data.deviceAddress,deviceBrand:t.parent.data.deviceBrand,parentLabel:t.parent.data.label,labelTotal:t.parent.data.label+"-"+e.label,deviceLatitude:t.parent.data.deviceLatitude,deviceLongitude:t.parent.data.deviceLongitude},s=Object.assign({},e,n);this.isLiveTree?i.getAttribute("class")?(i.setAttribute("class",""),this.$nextTick((function(){i.parentElement.parentElement.parentElement.classList.remove("is-current")})),this.$emit("videoChange",2,s)):(i.setAttribute("class","liveIcon"),i.parentElement.parentElement.parentElement.classList.add("is-current"),console.log(s),this.$emit("videoChange",1,s)):this.$emit("selectedDevice",s)}else{for(var l=document.querySelectorAll(".el-tree-node"),r=0;r<l.length;r++)l[r].classList.remove("is-current");i.parentElement.parentElement.parentElement.classList.add("is-current"),this.$emit("selectedChange",e,t.parent.data)}}},addParentDisabled:function(){for(var e=document.querySelectorAll("span.disabled"),t=0;t<e.length;t++)this.isLive&&(e[t].parentElement.parentElement.style.pointerEvents="none",e[t].parentElement.parentElement.style.cursor="not-allowed"),e[t].parentElement.parentElement.style.opacity="0.5",e[t].parentElement.parentElement.style.color="#007291"}},created:function(){var e=this;this.$nextTick((function(){e.addParentDisabled()}))}}),l=s,r=(a("cce6"),a("2877")),o=Object(r["a"])(l,i,n,!1,null,"4e05cd31",null);t["a"]=o.exports},"10a0":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"deviceMap"},[i("videoMain",{attrs:{showLeft:e.showLeft,isShowRight:e.isShowRight},on:{hideLeftNav:e.closeLeftNav}},[i("div",{attrs:{slot:"left"},slot:"left"},[i("div",{staticClass:"leftContainer"},[i("div",{staticClass:"tab"},[i("div",{class:{active:e.isOnline},on:{click:function(t){return t.stopPropagation(),e.changeOnlineOrAll(!0)}}},[e._v("在线")]),i("div",{class:{active:!e.isOnline},on:{click:function(t){return t.stopPropagation(),e.changeOnlineOrAll(!1)}}},[e._v("全部")])]),e.isOnline?[i("div",{staticClass:"onlineList webFsScroll"},e._l(e.onlineArray,(function(t,a){return i("div",{key:a,staticClass:"list",class:{selected:e.selectedIndex==a,unman:"WRJ"===t.deviceTypeCode},on:{click:function(i){return i.stopPropagation(),e.selectOnlineDeviceItem(t,a)}}},[i("p",[i("span",{staticClass:"area"},[e._v(e._s(t.label))])]),i("div",{staticClass:"btns"},e._l(t.children,(function(t,a){return i("el-button",{key:a,staticClass:"visible",attrs:{title:t.label}},[e._v(e._s(t.label&&t.label.length>3?t.label.slice(0,3)+"..":t.label?t.label:"-"))])})),1)])})),0)]:[i("div",{staticClass:"search"},[i("el-input",{attrs:{type:"text",placeholder:"请输入设备名称","suffix-icon":"el-icon-search"},model:{value:e.filterDevice,callback:function(t){e.filterDevice="string"===typeof t?t.trim():t},expression:"filterDevice"}})],1),i("tree-data",{ref:"tree",attrs:{treeData:e.treeData,isLiveTree:!1},on:{clickAnDeviceItem:e.clickAnDeviceItem}})],e.isOnline&&0===e.onlineArray.length||!e.isOnline&&0===e.treeData.length?i("div",{staticClass:"empty"},[e._v("暂无数据")]):e._e()],2)]),i("div",{attrs:{slot:"center"},slot:"center"},[i("div",{staticClass:"video"},[i("div",{staticClass:"deviceMapBox"},[i("div",{staticClass:"title"},[i("img",{attrs:{src:a("ae5c")},on:{click:function(t){return t.stopPropagation(),e.$router.go(-1)}}}),e._v("设备地图 ")]),i("div",{staticClass:"container"},[i("gMap",{ref:"gduMap",attrs:{handleType:"devMap",bShowSimpleSearchTools:!0,bShowBasic:!0,bShowMeasure:!1,bAutoLocate:!1}})],1)])])])])],1)},n=[],s=(a("4160"),a("a9e3"),a("159b"),a("4e09")),l=a("04e6"),r=a("e27c"),o={name:"deviceMap",components:{VideoMain:s["a"],TreeData:l["a"]},data:function(){return{isShowRight:!1,bShowMarkersInMap:!0}},mixins:[r["a"]],methods:{changeOnlineOrAll:function(e){if(Number(this.isOnline)!==Number(e))if(this.isOnline=e,this.isOnline)for(var t=document.querySelectorAll(".el-tree-node"),a=0;a<t.length;a++)t[a].classList.remove("is-current");else this.selectedIndex=200,this.onlineArray.forEach((function(e){e.children.forEach((function(e){e.isSelected=!1}))}))},showDeviceDetailInfo:function(e){this.$refs.gduMap.map2D.devCameraLayerManager.resetSelectedFeature(),this.$refs.gduMap.map2D.devDroneLayerManager.resetSelectedFeature(),this.$refs.gduMap.map2D.devFireWarningLayerManager.resetSelectedFeature(),"GDJK"===e.deviceTypeCode?(this.$refs.gduMap.showLayer("high",!0),this.$refs.gduMap.map2D.devCameraLayerManager.selectFeatureByID(e)):"WRJ"===e.deviceTypeCode&&(this.$refs.gduMap.showLayer("drone",!0),this.$refs.gduMap.map2D.devDroneLayerManager.selectFeatureByID(e)),this.$refs.gduMap.map2D.zoomToCenter(e.deviceLongitude,e.deviceLatitude)},selectOnlineDeviceItem:function(e,t){this.showDeviceDetailInfo(e),this.selectedIndex=t},clickAnDeviceItem:function(e){this.showDeviceDetailInfo(e)}},mounted:function(){this.$refs.gduMap.showLayer("fire",!1)}},c=o,d=(a("b554"),a("2877")),u=Object(d["a"])(c,i,n,!1,null,"101d6a71",null);t["default"]=u.exports},3042:function(e,t,a){},"4dde":function(e,t,a){},"4e09":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"leftNav"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.showLeft,expression:"showLeft"}],staticClass:"left"},[e._t("left")],2),e.showLeft?a("span",{staticClass:"iconRight",on:{click:function(t){return t.stopPropagation(),e.operateNav(1)}}}):a("span",{staticClass:"iconLeft",on:{click:function(t){return t.stopPropagation(),e.operateNav(2)}}})]),a("div",{staticClass:"center"},[e._t("center")],2),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowRight,expression:"isShowRight"}],staticClass:"rightInfo"},[e.showRight?a("span",{staticClass:"iconLeft",on:{click:function(t){return t.stopPropagation(),e.operateInfo(1)}}}):a("span",{staticClass:"iconRight",on:{click:function(t){return t.stopPropagation(),e.operateInfo(2)}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showRight,expression:"showRight"}],staticClass:"right"},[e._t("right")],2)])])},n=[],s={name:"box",props:{showLeft:{type:Boolean,default:!0},showRight:{type:Boolean,default:!0},isShowRight:{type:Boolean,default:!0}},methods:{operateNav:function(e){this.$emit("hideLeftNav",e)},operateInfo:function(e){this.$emit("hideRightInfo",e)}},created:function(){}},l=s,r=(a("b9ea"),a("2877")),o=Object(r["a"])(l,i,n,!1,null,null,null);t["a"]=o.exports},ae5c:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAARCAYAAAAyhueAAAABV0lEQVQ4T6WUsStFcRzFPwfJZGGVTCbKZpJJio2UnjxJykBMbO+9RVKSKCUWyWKwSfkDlDIZTCaLwcQojq5+V+9dz3Wfd9d7zud3v+f7O1ekPLangFtJ92m65Dv9JrY9CxwAfZLu6obaXgD2gAagt26o7RVgC4inqA9qew1YLwNGU5eAy5DtW5YYvjO1XQQKKaZX4AI4knSVBv+C2t4AVrN8RdDcAMuSrqt5ZHs7EtQAjKXvIaqCJJf7I+gisJPIsZYzToC8pI/YFI8/D+yHK1QLMNbuSlqqgIZc89ESgMb/UIEJSWeRt6JRtieBY6CpDDwNPAJtQGdUBmAA6Eoc/gR0S3r5UVPbY8Ap0BxMVS+/7R5gBpgDWoO2KKlUtfu2R4FolJa/amq7HdgMBzwDHWk/lCHgHOjP0n3bOeAQyP0KDcsbjPKU9JBlebaHgfFUaBZQUmN75BMmjnBGER7Z6AAAAABJRU5ErkJggg=="},b554:function(e,t,a){"use strict";var i=a("faf0"),n=a.n(i);n.a},b9ea:function(e,t,a){"use strict";var i=a("3042"),n=a.n(i);n.a},cce6:function(e,t,a){"use strict";var i=a("4dde"),n=a.n(i);n.a},faf0:function(e,t,a){}}]);